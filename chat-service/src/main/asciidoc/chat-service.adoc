= CHAT-Service RESTful Notes API Guide
:source-highlighter: highlightjs
:toc: left
:toclevels: 2
:sectnums:
:sectlinks:

[[api]]
== 회원가입 API
회원가입 기능을 제공하는 API이지만, 회원가입은 채팅 서비스에서 진행하지 않고, 메인 서버에서 진행합니다.

따라서 임시 회원을 만들고 테스트 하는 용도로 사용합니다.

Request 예시입니다.

include::{snippets}/register-post/http-request.adoc[]

Request Field 형식입니다.

include::{snippets}/register-post//request-fields.adoc[]

요청 성공시 Response 예시입니다.

include::{snippets}/register-post//http-response.adoc[]

Response 형식입니다.
Email, Nickname 외의 정보는 채팅 서비스에서 사용되지 않습니다.

include::{snippets}/register-post//response-fields.adoc[]

[[api]]
== jwt 토큰발급 API
jwt Access token을 발급 받습니다.

1. 토큰을 발급받을때는 Header에 별도의 처리를 안해도 됩니다.
2. email과 password로 가입된 사용자인지 확인합니다.
3. 이후의 모든 Request는 Header Authorization에 토큰을 넣어야 하며 형식은 아래와 같습니다.
4. "jwt " + "발급받은 토큰" jwt 뒤에 공백이 있음에 주의하세요.

Request 예시입니다.

include::{snippets}/authenticate-post-success/http-request.adoc[]
Request Field 형식입니다.

include::{snippets}/authenticate-post-success/request-fields.adoc[]

토큰을 정상적으로 발급받을 때 Response 예시입니다.
include::{snippets}/authenticate-post-success/http-response.adoc[]
토큰을 정상적으로 발급받을 때 Response 형식입니다.
include::{snippets}/authenticate-post-success/response-fields.adoc[]

존재하지 않은 Email 정보를 사용했을 때

include::{snippets}/authenticate-post-fail-notexistuser/http-response.adoc[]


[[api]]
== 채널생성 API
새로운 채널을 생성합니다.
같은 이름의 채널이 이미 존재하거나, Jwt-Token이 올바르지 않은 경우 채널이 생성되지 않습니다.

1. header에 jwt access 토큰을 넣어야 합니다.
2. hashTags는 공백일 경우 최소 빈 배열을 넘겨주세요.
3. hashTags 개수의 제한은 없으나, UI 디자인에 문제가 발생할 수도 있기에 정책의 설정이 필요합니다.
4. 문자 채팅과 음성 채팅방은 분리가 되어 있습니다. 채널 타입이 추가되는 확장성을 위해 Enum 타입으로 정의합니다. 현재 존재하는 채널 타입의 종류는 아래와 같습니다.

    TEXT, VOIP

Request 예시입니다.

include::{snippets}/create-channel-success/http-request.adoc[]

Request Field 형식입니다.

include::{snippets}/create-channel-success/request-fields.adoc[]

채널을 정상적으로 생성할 때 Response 예시입니다.

include::{snippets}/create-channel-success/http-response.adoc[]

jwt-token에 아래 4가지 문제중 하나가 존재할때 예시입니다. 로그인을 다시하여 토큰을 다시 발급받아야 합니다.

1. 존재하지 않는 User token입니다.
2. Jwt Access Token이 만료되었습니다.
3. 올바르지 않은 Jwt Token 형식입니다.
4. 올바르지 않은 Jwt Hashing algorithm입니다.

include::{snippets}/jwt-accesstoken-invalid/http-response.adoc[]

이미 같은 이름을 사용하는 채널이 존재할때 Response 입니다.
include::{snippets}/create-channel-fail-alreadyExistName/http-response.adoc[]


[[api]]
== 특정 채널정보 반환 API
하나의 채널정보를 반환합니다.
채널이 존재하지 않거나, Jwt-Token이 올바르지 않을 경우 예외가 발생합니다.

1. header에 jwt access 토큰을 넣어야 합니다.
2. PathParameter로 channelId를 추가 해야합니다.

Request 예시입니다.

include::{snippets}/return-channelInfo-success/http-request.adoc[]

채널을 정상적으로 반환할 때 Response 예시입니다.

include::{snippets}/return-channelInfo-success/http-response.adoc[]

jwt-token에 아래 4가지 문제중 하나가 존재할때 예시입니다. 로그인을 다시하여 토큰을 다시 발급받아야 합니다.

1. 존재하지 않는 User token입니다.
2. Jwt Access Token이 만료되었습니다.
3. 올바르지 않은 Jwt Token 형식입니다.
4. 올바르지 않은 Jwt Hashing algorithm입니다.

include::{snippets}/jwt-accesstoken-invalid/http-response.adoc[]

존재하지 않는 channelId를 PatParameter로 넣었을때 Response 입니다.
include::{snippets}/return-channelInfo-fail-notexistchannel/http-response.adoc[]

